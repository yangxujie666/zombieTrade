/*!
 * Jusfoun D3.js Chart Library v0.1.0
 * Powered by Jusfoun Visualization Department
 * Contact: 
 *   vd@jusfoun.com
 *   http://vd.jusfoun.com
 * 
 * Copyright (c) 2017, Jusfoun Big Data Group Inc.
 * All rights reserved.
 * 
 * LICENSE
 * http://www.jusfoun.com/software/LICENSE.txt
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define("ChartLib",["d3"],e):"object"==typeof exports?exports.ChartLib=e(require("d3")):t.ChartLib=e(t.d3)}(this,function(t){return function(t){function e(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};return e.m=t,e.c=a,e.d=function(t,a,r){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(e,a){e.exports=t},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),l=a(4),u=function(t){function e(t){r(this,e);var a=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));a._id=void 0,a._domElement=void 0,a._svg=void 0;var i=a;i._id="auto_id_"+Math.round(16777215*Math.random())+"_"+Math.round(16777215*Math.random());var o=(0,l.createElement)("div");i._domElement=o;var u=(0,l.createElementNS)(l.SVG_NS,"svg");return i._svg=u,(0,l.setAttributes)(u,{version:"1.1",xmlns:l.SVG_NS,"xmlns:xlink":l.XLINK_NS}),o.appendChild(u),a}return i(e,t),o(e,[{key:"resize",value:function(t,e){var a=this;a.width=t||a.width,a.height=e||a.height}},{key:"capture",value:function(t,e){}},{key:"updateDisplayList",value:function(){var t=this,e=t._domElement,a=e.parentElement,r=t._width;!r&&a&&(r=a.clientWidth),r+="";var n=t._height;!n&&a&&(n=a.clientHeight),n+="";var i=/[\D]+$/gi;(0,l.setStyles)(e,{width:i.test(r)?r:r+"px",height:i.test(n)?n:n+"px"}),(0,l.setAttributes)(t._svg,{width:r,height:n,viewBox:[0,0,r,n].join(" ")})}},{key:"domElement",get:function(){return this._domElement}}]),e}(l.UiComponent);e.default=u},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),u=a(0),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(u),d=a(1),c=r(d),f=a(6),p=r(f),h=function(t,e){!function t(a,r){e(a,r);var n=a.children;n instanceof Array&&n.length>0&&n.forEach(function(e){t(e,a)})}(t)},_=function(t,e){for(var a=t,r=t.parent;r;)e(r,a),a=r,r=r.parent},v=3.141592653589793,y=6.283185307179586,g=.017453292519943295,m=function(t){function e(t){n(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));a._data=void 0,a._position=void 0,a._spaceRadius=void 0,a._invalidateDataFlag=!1,a._invalidateSpaceFlag=!1,a._d3Svg=void 0,a._d3MainGroup=void 0,a._d3Control=void 0,a._d3Tree=void 0,a._d3Arcs=void 0,a._d3Vertices=void 0,a._d3Edges=void 0,a._d3SelectedItem=void 0;var r=a;r._initDefs();var o=s.select(r._svg);r._d3Svg=o;var l=o.append("g").attr("class","main");return r._d3MainGroup=l,r._d3Control=(0,p.default)(o).scaleExtent([.25,8]).duration(0).on("zoom",function(){l.attr("transform",s.event.transform)}),r._d3Tree=s.tree().size([1,1]).separation(function(t,e){return 1}),a}return o(e,t),l(e,[{key:"setPosition",value:function(t,e){this.position={x:t,y:e}}},{key:"_initDefs",value:function(){var t=this,e=t._id,a=s.select(t._svg),r=a.append("defs");r.append("filter").attr("id",e+"_filter_blur_1").attr("x",-50).attr("y",-50).attr("width",100).attr("height",100).append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",6),r.append("filter").attr("id",e+"_filter_blur_2").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",3);var n=r.append("linearGradient").attr("id",e+"_linear_gradient_1").attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%");n.append("stop").attr("offset","0%").attr("style","stop-color: #a4c9ff; stop-opacity: 1;"),n.append("stop").attr("offset","100%").attr("style","stop-color: #14467d; stop-opacity: 0.85;");var i=r.append("linearGradient").attr("id",e+"_linear_gradient_2").attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%");i.append("stop").attr("offset","0%").attr("style","stop-color: #de561e; stop-opacity: 1;"),i.append("stop").attr("offset","100%").attr("style","stop-color: #ffa289; stop-opacity: 0.85;");var o=r.append("linearGradient").attr("id",e+"_linear_gradient_3").attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%");o.append("stop").attr("offset","0%").attr("style","stop-color: #ffffff; stop-opacity: 0;"),o.append("stop").attr("offset","50%").attr("style","stop-color: #ffffff; stop-opacity: 1.0;"),o.append("stop").attr("offset","100%").attr("style","stop-color: #ffffff; stop-opacity: 0;")}},{key:"_calculateRadius",value:function(t,e){isNaN(e)&&(e=1);var a=this,r=a._spaceRadius;return isNaN(r)&&(r=a._spaceRadius=Math.min(a._width,a._height)/2),t*e*(r-130)}},{key:"_calculatePosition",value:function(t,e,a){if(0==t.depth)return{x:0,y:0};isNaN(e)&&(e=1),isNaN(a)&&(a=1);var r=t._angle*e,n=this._calculateRadius(t.y,a);return{x:Math.cos(r)*n,y:Math.sin(r)*n}}},{key:"_drawTestPolar",value:function(){var t=this,e=t._data,a=t._d3MainGroup,r=(t._d3Control,t._d3Tree),n=r(s.hierarchy(e,function(t){return t.children})),i=[],o={};h(n,function(t,e){if(0!=t.depth){t.depth>1&&(t.data.group=e.data.group);var a=t.depth,r=t.data.group,n=o[r];n||(n={id:r,mapDepthInfo:{},listDepthInfo:[]},o[r]=n,i.push(n));var l=n.mapDepthInfo[a];l||(l={depth:a,minX:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,vertices:[]},n.mapDepthInfo[a]=l,n.listDepthInfo.push(l)),t.x<l.minX&&(l.minX=t.x),t.x>l.maxX&&(l.maxX=t.x),l.vertices.push(t)}});var l=y-.5235987755982988*i.length,u=100*g;i.forEach(function(t){delete t.mapDepthInfo,t.listDepthInfo.forEach(function(t){var e=t.vertices.length;t.vertices.forEach(function(a,r){a._percent=a.x,a._angle=u+a._percent*l,0==r&&(t.y=a.y,t.startAngle=a._angle),r==e-1&&(t.endAngle=a._angle)})}),u+=.5235987755982988});var d=n.descendants(),c=n.links();t._position||t.setPosition(t._width/2,t._height/2),a.selectAll(".arc").attr("class",".arc-removing").transition().duration(200).delay(function(t,e){return 100+50*e}).tween("arc.disappear",function(t){var e=this;return function(t){e.style.opacity=1-t}}).on("end",function(){s.select(this).remove()});var f=a.selectAll(".arc").data(i).enter().append("g").attr("class","arc").each(function(e){var a=s.select(this);t._drawArc(e,a)});t._d3Arcs=f,a.selectAll(".edge").attr("class",".edge-removing").transition().duration(200).delay(function(t,e){return 100+2*e}).tween("edge.disappear",function(t){var e=this;return function(t){e.style.opacity=1-t}}).on("end",function(){s.select(this).remove()});var p=a.selectAll(".edge").data(c).enter().append("g").attr("class","edge").attr("data-source",function(t){return t.source.data.id}).attr("data-target",function(t){return t.target.data.id}).each(function(e){var a=s.select(this);t._drawEdge(e,a)});t._d3Edges=p,a.selectAll(".vertex").attr("class",".vertex-removing").transition().duration(200).delay(function(t,e){return 2*e}).tween("vertex.disappear",function(t){var e=this;return function(t){e.style.opacity=1-t}}).on("end",function(){s.select(this).remove()});var _=a.selectAll(".vertex").data(d).enter().append("g").attr("class","vertex").attr("data-id",function(t){return t.data.id}).each(function(e){var a=s.select(this);0==e.depth?a.attr("is-root",1):a.attr("data-group",e.data.group),t._drawVertex(e,a),t._updateVertexState(e,a)});t._d3Vertices=_,_.style("opacity",0).transition().duration(1e3).delay(function(t,e){return 5*e}).tween("vertex.appear",function(e){var a=this;return function(r){var n=t._calculatePosition(e,r);a.setAttribute("transform",["translate(",n.x,",",n.y,")"].join("")),a.style.opacity=r}});var v=5*_.size();p.style("opacity",0).transition().duration(1e3).delay(function(t,e){return v+5*e}).tween("edge.appear",function(t){var e=this;return function(t){e.style.opacity=t}}),f.style("opacity",0).transition().duration(1e3).delay(function(t,e){return v+50*e}).tween("arc.appear",function(t){var e=this;return function(t){e.style.opacity=t}}),v+=5*p.size(),a.transition().duration(500).delay(v).on("end",function(){h(n,function(e){e.depth>1&&(e._blur=!0,t._updateVertexState(e))})})}},{key:"_drawArc",value:function(t,e){var a=this,r=[],n=t.listDepthInfo[0],i=a._calculateRadius(n.y),o=n.startAngle-.2617993877991494,l=n.endAngle+.2617993877991494,u={x:Math.cos(o)*i,y:Math.sin(o)*i},s={x:Math.cos(l)*i,y:Math.sin(l)*i};r.push("M",u.x,u.y),r.push("A",i,i,0,Math.abs(l-o)>v?1:0,1,s.x,s.y),e.append("path").attr("class","path").attr("fill","none").attr("stroke-width",2).attr("stroke",["url(#",a._id,"_linear_gradient_3)"].join("")).attr("d",r.join(" "))}},{key:"_drawVertex",value:function(t,e){e=e||s.select('.vertex[data-id="'+t.data.id+'"]');var a=this,r=function(){a.fire({type:"itemClick",data:t.data})},n=function(){var e=a._d3SelectedItem;e&&(e._selected=!1,e._highlight=!1,e._updateSelectionState=!0,e._updateRelationState=!0,e.depth>1&&(e._blur=!0),a._updateVertexState(e),a._d3SelectedItem=null,e==t)||(a._d3SelectedItem=t,t._selected=!t._selected,t._highlight=!0,t._updateSelectionState=!0,t._updateRelationState=!0,a._updateVertexState(t,s.select(this)))},i=function(){a.fire({type:"itemExpand",data:t.data,expanded:t._selected})},o=function(){t._highlight=!1,t._updateRelationState=!0,a._updateVertexState(t,s.select(this))},l=function(){t._highlight=!0,t._updateRelationState=!0,a._updateVertexState(t,s.select(this))};if(0==t.depth)e.append("svg:image").attr("class","background").attr("x",-210.5).attr("y",-210.5).attr("width",421).attr("height",421).attr("xlink:href","./static/image/depth-0-vertex-normal.png"),e.append("text").attr("class","label").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size","16").attr("font-weight","bold").attr("fill","#FFF").text(function(t){return t.data.name}),e.append("circle").attr("class","button").attr("fill","#FFF").attr("opacity",0).attr("cx","0").attr("cy","0").attr("r","36").style("cursor","pointer").on("mouseout",function(){o.call(this.parentNode)}).on("mouseover",function(){l.call(this.parentNode)}).on("click",function(){r()});else{var u=t.children;if(u instanceof Array&&u.length>0){e.append("rect").attr("class","background").attr("width","100").attr("height","20").attr("rx","10").attr("ry","10").attr("y",-10).attr("fill","#013077").attr("stroke","#6389c2"),e.append("rect").attr("class","halo").attr("width","100").attr("height","20").attr("rx","10").attr("ry","10").attr("y",-10).attr("visibility","hidden").attr("fill","#ff7655");e.append("svg:image").attr("class","expand-icon").attr("y",-12.5).attr("width",25).attr("height",25).attr("xlink:href","./static/image/depth-1-vertex-normal.png").on("click",function(){n.call(this.parentNode),i()});e.append("text").attr("class","label").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size","12").attr("font-weight","bold").attr("fill","#FFF").text(function(t){return t.data.name}).on("click",function(){r()})}else e.append("rect").attr("class","background").attr("width","88").attr("height","20").attr("rx","10").attr("ry","10").attr("y",-10).attr("opacity",.6).attr("visibility","hidden").attr("fill","#fd6b41"),e.append("rect").attr("class","halo").attr("width","112").attr("height","38").attr("rx","19").attr("ry","19").attr("y",-19).attr("opacity",.1).attr("visibility","hidden").attr("fill","#fd6b41"),e.append("text").attr("class","label").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size","12").attr("font-weight","bold").attr("fill","#FFF").text(function(t){return t.data.name}),e.append("circle").attr("class","dot").attr("cx",0).attr("cy",0).attr("r",4).attr("fill","#fd6541").attr("stroke","#fd6541"),e.on("click",function(){n.call(this),r()});e.style("cursor","pointer").on("mouseout",o).on("mouseover",l)}}},{key:"_updateVertexState",value:function(t,e){e=e||s.select('.vertex[data-id="'+t.data.id+'"]');var a=this,r=t._highlight;if(t._selected&&(t._highlight=!0),e.attr("transform",function(t){var e=a._calculatePosition(t);return["translate(",e.x,",",e.y,")"].join("")}),0==t.depth)e.select(".background").attr("xlink:href",t._highlight?"./static/image/depth-0-vertex-emphasis.png":"./static/image/depth-0-vertex-normal.png");else{var n=t.children,i=(t._angle+1.5707963267948966)%y<v;if(n instanceof Array&&n.length>0){var o=e.select(".label"),l=o.node().getBBox(),u=25+l.width+15;o.attr("x",(25+l.width/2)*(i?1:-1)),e.select(".background").attr("width",u).attr("x",i?0:-u).attr("fill",t._highlight?"#fd6541":"#013077").attr("stroke",t._highlight?"#fd6541":"#6389c2"),e.select(".halo").attr("width",u).attr("x",i?0:-u).attr("filter",t._highlight?["url(#",a._id,"_filter_blur_1)"].join(""):"").attr("visibility",t._highlight?"visible":"hidden"),e.select(".expand-icon").attr("x",(i?5:-5)-12.5).attr("xlink:href",t._highlight?"./static/image/depth-1-vertex-emphasis.png":"./static/image/depth-1-vertex-normal.png")}else{var d=e.select(".label"),c=d.node().getBBox(),f=5+c.width+5,p=f+20;if(d.attr("x",(5+c.width/2+10)*(i?1:-1)).attr("fill",t._highlight?"#FFF":"#35508d"),e.select(".background").attr("width",f).attr("x",i?10:-(f+10)).attr("visibility",t._highlight?"visible":"hidden"),e.select(".halo").attr("width",p).attr("x",i?0:-p).attr("visibility",t._highlight?"visible":"hidden"),e.select(".dot").attr("fill",t._highlight?"#fd6541":"#013077").attr("stroke",t._highlight?"#fd6541":"#6389c2"),t.depth>1){t._selected&&(t._blur=!1);var g=t._blur;t._highlight&&(g=!1);var m=g?["url(#",a._id,"_filter_blur_2)"].join(""):"";e.select(".background").attr("filter",m),e.select(".halo").attr("filter",m),e.select(".label").attr("filter",m),e.attr("opacity",g?.6:1)}}}var b=t._updateSelectionState;t._updateSelectionState=!1;var x=t._updateRelationState;t._updateRelationState=!1,x&&(_(t,function(e,n){b&&(e._selected=t._selected),e._highlight=r,e._updateRelationState=!1,a._updateVertexState(e);var i=s.select(['.edge[data-source="',e.data.id,'"][data-target="',n.data.id,'"]'].join("")),o=i.datum();o._highlight=r,b&&(o._selected=t._selected),a._updateEdgeState(o,i)}),h(t,function(e,n){if(e!=t){b&&(e._selected=t._selected),e.depth>1&&(e._blur=!e._selected),e._highlight=r,e._updateRelationState=!1,a._updateVertexState(e);var i=s.select(['.edge[data-source="',n.data.id,'"][data-target="',e.data.id,'"]'].join("")),o=i.datum();o._highlight=r,b&&(o._selected=t._selected),a._updateEdgeState(o,i)}}))}},{key:"_drawEdge",value:function(t,e){var a=this,r=a._calculatePosition(t.source),n=a._calculatePosition(t.target);e.append("line").attr("class","line").attr("x1",r.x).attr("y1",r.y).attr("x2",n.x).attr("y2",n.y).attr("stroke",["url(#",a._id,"_linear_gradient_1)"].join(""))}},{key:"_updateEdgeState",value:function(t,e){e=e||s.select(['.edge[data-source="',t.source.data.id,'"][data-target="',t.target.data.id,'"]'].join(""));var a=this,r=a._id;t._selected&&(t._highlight=!0),e.select(".line").attr("stroke",t._highlight?["url(#",r,"_linear_gradient_2)"].join(""):["url(#",r,"_linear_gradient_1)"].join(""))}},{key:"commitProperties",value:function(){var t=this;t._invalidateDataFlag&&(t._invalidateDataFlag=!1,t._drawTestPolar()),t._invalidateSpaceFlag&&(t._invalidateSpaceFlag=!1,t._d3Vertices.attr("transform",function(e){var a=t._calculatePosition(e);return["translate(",a.x,",",a.y,")"].join("")}),t._d3Edges.each(function(e){t._updateEdgeState(e,s.select(this))}))}},{key:"data",get:function(){return this._data},set:function(t){var e=this;e._data=t,e._invalidateDataFlag=!0,e.invalidateProperties()}},{key:"spaceRadius",get:function(){return this._spaceRadius},set:function(t){var e=this;e._spaceRadius=t,e._invalidateSpaceFlag=!0,e.invalidateProperties()}},{key:"position",get:function(){return this._position},set:function(t){var e=this;e._position=t,e._d3Control.translate(e._d3MainGroup,e._position.x,e._position.y)}}]),e}(c.default);e.default=m},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.PolarGroupedBranchChart2=e.PolarGroupedBranchChart=e.GraphUtil=e.D3Base=void 0;var n=a(1),i=r(n),o=a(5),l=r(o),u=a(2),s=r(u),d=a(7),c=r(d);e.D3Base=i.default,e.GraphUtil=l.default,e.PolarGroupedBranchChart=s.default,e.PolarGroupedBranchChart2=c.default},function(t,e,a){/*!
 * Jusfoun Common Library v0.1.6
 * Powered by Jusfoun Visualization Department
 * Contact: 
 *   vd@jusfoun.com
 *   http://vd.jusfoun.com
 * 
 * Copyright (c) 2017, Jusfoun Big Data Group Inc.
 * All rights reserved.
 * 
 * LICENSE
 * http://www.jusfoun.com/software/LICENSE.txt
 */
!function(e,a){t.exports=a()}(0,function(){return function(t){function e(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};return e.m=t,e.c=a,e.d=function(t,a,r){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),i=function(t,e){Object.defineProperty(t,"target",{configurable:!0,enumerable:!0,get:function(){return e},set:void 0})},o=function(){function t(e){r(this,t),this._target=e}return n(t,[{key:"addEventListener",value:function(t,e,a){var r=this;if(!t||"function"!=typeof e)throw new Error("Illegal parameters.");var n=r._mapKTypeVListenerTokens;void 0==n&&(n=r._mapKTypeVListenerTokens={});var i=n[t];void 0==i&&(i=n[t]=[]);var o={listener:e,thisArg:a};i.push(o)}},{key:"removeEventListener",value:function(t,e){var a=this;if(!t||"function"!=typeof e)throw new Error("Illegal parameters.");var r=a._mapKTypeVListenerTokens;if(void 0!=r){var n=r[t];if(void 0!=n){for(var i=[],o=0;o<n.length;o++){var l=n[o];l.listener==e&&(i.push(o),delete l.listener,delete l.thisArg)}for(var u=i.length-1;u>=0;u--)n.splice(i[u],1);n.length<1&&delete r[t]}}}},{key:"removeEventListeners",value:function(t){var e=this,a=e._mapKTypeVListenerTokens;if(void 0!=a)if(void 0==t)for(var r in a)a.hasOwnProperty(r)&&e.removeEventListeners(r);else{var n=a[t];if(void 0==n)return;for(var i=0;i<n.length;i++){var o=n[i];delete o.listener,delete o.thisArg}delete a[t]}}},{key:"hasEventListener",value:function(t,e){var a=this;if(!t)throw new Error("Illegal parameters.");var r=a._mapKTypeVListenerTokens;if(void 0==r)return!1;var n=r[t];if(void 0==e)return void 0!=n;for(var i=0;i<n.length;i++)if(n[i].listener==e)return!0;return!1}},{key:"dispatchEvent",value:function(t){var e=this;if(!t||!t.type)throw new Error("Illegal parameter event: "+t);var a=e._mapKTypeVListenerTokens;if(void 0!=a){var r=a[t.type];if(void 0!=r){i(t,e._target||e);for(var n=0;n<r.length;n++){var o=r[n];o.listener.call(o.thisArg,t)}}}}},{key:"on",value:function(t,e,a){this.addEventListener(t,e,a)}},{key:"off",value:function(t,e){var a=this;"function"==typeof e?a.removeEventListener(t,e):a.removeEventListeners(t)}},{key:"fire",value:function(t){this.dispatchEvent(t)}}]),t}();e.default=o},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),l=a(0),u=function(t){return t&&t.__esModule?t:{default:t}}(l),s=function(t){function e(t,a){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));i._intervalId=void 0,i._requestAnimationFrameFlag=!1,i._requestAnimationFrameCount=0,i._delay=void 0,i._repeatCount=0,i._currentCount=0;var o=i;return o._setIntervalHandler=o._setIntervalHandler.bind(o),o._requestAnimationFrameHandler=o._requestAnimationFrameHandler.bind(o),o.delay=t,o.repeatCount=a||0,i}return i(e,t),o(e,[{key:"_setIntervalHandler",value:function(){this._run()}},{key:"_requestAnimationFrameHandler",value:function(){var t=this;1==t._requestAnimationFrameCount&&t._run(),t._requestAnimationFrameCount<1&&t._requestAnimationFrameCount++,t._requestAnimationFrameFlag&&requestAnimationFrame(t._requestAnimationFrameHandler)}},{key:"_run",value:function(){var t=this;if(0!=t._repeatCount&&t._currentCount>=t._repeatCount)return t.stop(),void t.fire({type:"timerComplete"});t._currentCount++,t.fire({type:"timer"})}},{key:"reset",value:function(){var t=this;t.stop(),t._currentCount=0}},{key:"start",value:function(){var t=this;t.running||(-4132==t._delay&&"function"==typeof requestAnimationFrame?(t._requestAnimationFrameFlag=!0,requestAnimationFrame(t._requestAnimationFrameHandler)):t._delay>0&&(t._intervalId=setInterval(t._setIntervalHandler,t._delay)))}},{key:"stop",value:function(){var t=this;t.running&&(clearInterval(t._intervalId),t._intervalId=void 0,t._requestAnimationFrameFlag=!1,t._requestAnimationFrameCount=0)}},{key:"delay",get:function(){return this._delay},set:function(t){var e=this;if(e._delay!=t){if(isNaN(t)||!isFinite(t)||t<=0&&-4132!=t)throw new Error("Illegal delay value: "+t);return e._delay=t,e.running&&(e.stop(),e.start()),e}}},{key:"repeatCount",get:function(){return this._repeatCount},set:function(t){var e=this;if(e._repeatCount!=t){if(isNaN(t)||!isFinite(t)||t<0)throw new Error("Illegal repeat count value: "+t);return e._repeatCount=t,e}}},{key:"currentCount",get:function(){return this._currentCount}},{key:"running",get:function(){var t=this;return void 0!=t._intervalId||t._requestAnimationFrameFlag}}]),e}(u.default);s.REQUEST_ANIMATION_FRAME=-4132,e.default=s},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),i=a(1),o=function(t){return t&&t.__esModule?t:{default:t}}(i),l=function(){function t(){r(this,t),this._timer=null,this._invalidatePropertiesQueue=[],this._invalidatePropertiesFlag=!1,this._invalidateSizeQueue=[],this._invalidateSizeFlag=!1,this._invalidateDisplayListQueue=[],this._invalidateDisplayListFlag=!1;var e=this;e._timer=new o.default(o.default.REQUEST_ANIMATION_FRAME,1),e._timer.on("timerComplete",e._timerCompleteHandler,e)}return n(t,[{key:"_timerCompleteHandler",value:function(t){var e=this;e._invalidatePropertiesFlag&&e._validateProperties(),e._invalidateSizeFlag&&e._validateSize(),e._invalidateDisplayListFlag&&e._validateDisplayList()}},{key:"invalidateProperties",value:function(t){var e=this;t&&"function"==typeof t.validateProperties&&(e._invalidatePropertiesQueue.push(t),e._invalidatePropertiesFlag=!0,e._timer.running||e._timer.start())}},{key:"invalidateSize",value:function(t){var e=this;t&&"function"==typeof t.validateSize&&(e._invalidateSizeQueue.push(t),e._invalidateSizeFlag=!0,e._timer.running||e._timer.start())}},{key:"invalidateDisplayList",value:function(t){var e=this;t&&"function"==typeof t.validateDisplayList&&(e._invalidateDisplayListQueue.push(t),e._invalidateDisplayListFlag=!0,e._timer.running||e._timer.start())}},{key:"validateClient",value:function(t){if(!t)throw new Error("Target is NULL.");"function"==typeof t.validateProperties&&t.validateProperties(),"function"==typeof t.validateSize&&t.validateSize(),"function"==typeof t.validateDisplayList&&t.validateDisplayList()}},{key:"_validateProperties",value:function(){for(var t=this;t._invalidatePropertiesQueue.length>0;)t._invalidatePropertiesQueue.pop().validateProperties();t._invalidatePropertiesFlag=!1}},{key:"_validateSize",value:function(){for(var t=this;t._invalidateSizeQueue.length>0;)t._invalidateSizeQueue.pop().validateSize();t._invalidateSizeFlag=!1}},{key:"_validateDisplayList",value:function(){for(var t=this;t._invalidateDisplayListQueue.length>0;)t._invalidateDisplayListQueue.pop().validateDisplayList();t._invalidateDisplayListFlag=!1}}]),t}();e.default=l},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.UiComponent=e.LayoutManager=e.Timer=e.EventDispatcher=void 0;var n=a(4);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var i=a(0),o=r(i),l=a(1),u=r(l),s=a(2),d=r(s),c=a(5),f=r(c);e.EventDispatcher=o.default,e.Timer=u.default,e.LayoutManager=d.default,e.UiComponent=f.default},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return document.createElement.apply(document,arguments)},n=function(){return document.createElementNS.apply(document,arguments)},i=function(t,e,a){return a?t.getAttributeNS(a,e):t.getAttribute(e)},o=function(t,e,a){for(var r in e)if(e.hasOwnProperty(r)){var n=e[r]+"";a?t.setAttributeNS(a,r,n):t.setAttribute(r,n)}},l=function(t,e){for(var a in e)if(e.hasOwnProperty(a)){var r=e[a];-1!=a.indexOf("-")&&(a=a.replace(/\-([\w]+?)/g,function(){return arguments[1].toUpperCase()})),t.style[a]=r+""}};e.XHTML_NS="http://www.w3.org/1999/xhtml",e.SVG_NS="http://www.w3.org/2000/svg",e.XLINK_NS="http://www.w3.org/1999/xlink",e.createElement=r,e.createElementNS=n,e.getAttribute=i,e.setAttributes=o,e.setStyles=l},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),u=a(0),s=r(u),d=a(2),c=r(d),f=new c.default,p=function(t){function e(){n(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._invalidatePropertiesFlag=!1,t._invalidateSizeFlag=!1,t._invalidateDisplayListFlag=!1,t._layoutManager=f,t._x=0,t._y=0,t._width=0,t._height=0,t}return o(e,t),l(e,[{key:"initialize",value:function(){}},{key:"invalidateProperties",value:function(){var t=this;t._invalidatePropertiesFlag||(t._invalidatePropertiesFlag=!0,(t._layoutManager||f).invalidateProperties(t))}},{key:"invalidateSize",value:function(){var t=this;t._invalidateSizeFlag||(t._invalidateSizeFlag=!0,(t._layoutManager||f).invalidateSize(t))}},{key:"invalidateDisplayList",value:function(){var t=this;t._invalidateDisplayListFlag||(t._invalidateDisplayListFlag=!0,(t._layoutManager||f).invalidateDisplayList(t))}},{key:"validateNow",value:function(){(this._layoutManager||f).validateClient(this)}},{key:"validateProperties",value:function(){var t=this;t._invalidatePropertiesFlag&&(t.commitProperties(),t._invalidatePropertiesFlag=!1)}},{key:"validateSize",value:function(){var t=this;t._invalidateSizeFlag&&(t.measure(),t._invalidateSizeFlag=!1)}},{key:"validateDisplayList",value:function(){var t=this;t._invalidateDisplayListFlag&&(t.updateDisplayList(),t._invalidateDisplayListFlag=!1)}},{key:"commitProperties",value:function(){}},{key:"measure",value:function(){}},{key:"updateDisplayList",value:function(){}},{key:"setStyle",value:function(){}},{key:"x",get:function(){return this._x},set:function(t){var e=this;e._x!=t&&(e._x=t,e.invalidateProperties(),e.invalidateSize(),e.invalidateDisplayList())}},{key:"y",get:function(){return this._y},set:function(t){var e=this;e._y!=t&&(e._y=t,e.invalidateProperties(),e.invalidateSize(),e.invalidateDisplayList())}},{key:"width",get:function(){return this._width},set:function(t){var e=this;e._width!=t&&(e._width=t,e.invalidateProperties(),e.invalidateSize(),e.invalidateDisplayList())}},{key:"height",get:function(){return this._height},set:function(t){var e=this;e._height!=t&&(e._height=t,e.invalidateProperties(),e.invalidateSize(),e.invalidateDisplayList())}}]),e}(s.default);e.default=p}])})},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),i=function(){function t(){r(this,t)}return n(t,null,[{key:"toTreeData",value:function(t,e,a){a=a||{};var r=a.vertexIdField||"id",n=a.edgeSourceIdField||"source",i=a.edgeTargetIdField||"target",o=a.childrenField||"children",l="_vertexInfo_"+Math.round(4294967295*Math.random()),u={},s=[],d=[];if(e instanceof Array&&e.forEach(function(t){var e={id:t[r],visited:!1,inDegree:0,outDegree:0};t[l]=e,t[o]=[],u[e.id]=t,s.push(t)}),!(t instanceof Array))throw new Error("Edge data are required.");if(t.forEach(function(t){var e=t[n],a=u[e];if(!a){a={};var d={id:e,visited:!1,inDegree:0,outDegree:0};a[r]=e,a[l]=d,a[o]=[],u[d.id]=a,s.push(a)}var c=t[i],f=u[t.target];f||(f={},d={id:c,visited:!1,inDegree:0,outDegree:0},f[r]=c,f[l]=d,f[o]=[],u[d.id]=f,s.push(f)),a[l].outDegree++,f[l].inDegree++,a[o].push(f)}),s.forEach(function(t){var e=t[l];delete t[l],0==e.inDegree&&d.push(t)}),0==d.length)throw new Error("It's NOT a tree structure.");if(d.length>1){var c={};return c[r]="auto_root_"+Math.round(16777215*Math.random()),c[o]=d,c}return d[0]}}]),t}();e.default=i},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(0),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(r),i=function(t){var e=0,a=!1,r=0,i=0,o={x:0,y:0},l={x:0,y:0},u=n.zoom().on("start.internal",function(){}).on("end.internal",function(){a=!1,r=0,i=0}).on("zoom.internal",function(){var t=n.touches(this);if(t&&t.length>1){if(!a){a=!0;var u=t[0][0]-t[1][0],s=t[0][1]-t[1][1];r=Math.atan2(u,s),i=e}var d=t[0][0]-t[1][0],c=t[0][1]-t[1][1],f=r-Math.atan2(d,c);e=i+f,n.event.rotation=e,o.x=(t[0][0]+t[1][0])/2,o.y=(t[0][1]+t[1][1])/2}else n.event.rotation=e;a&&(n.event.transform.x=o.x,n.event.transform.y=o.y),n.event&&n.event.transform&&(l.x=n.event.transform.x,l.y=n.event.transform.y)});return u.translate=function(t,e,a){u.transform(t,function(){var t=this;return t.__zoom.x=e,t.__zoom.y=a,t.__zoom})},t.call(u),u};e.default=i},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),l=a(0),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(l),s=a(2),d=function(t){return t&&t.__esModule?t:{default:t}}(s),c=function(t,e){!function t(a,r){e(a,r);var n=a.children;n instanceof Array&&n.length>0&&n.forEach(function(e){t(e,a)})}(t)},f=function(t,e){for(var a=t,r=t.parent;r;)e(r,a),a=r,r=r.parent},p=function(t){function e(){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),o(e,[{key:"_initDefs",value:function(){var t=this,e=t._id,a=u.select(t._svg),r=a.append("defs");r.append("filter").attr("id",e+"_filter_blur_1").attr("x",-50).attr("y",-50).attr("width",100).attr("height",100).append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",6),r.append("filter").attr("id",e+"_filter_blur_2").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",3);var n=r.append("linearGradient").attr("id",e+"_linear_gradient_1").attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%");n.append("stop").attr("offset","0%").attr("style","stop-color: #0084ff; stop-opacity: 1;"),n.append("stop").attr("offset","100%").attr("style","stop-color: #14467d; stop-opacity: 0.3;");var i=r.append("linearGradient").attr("id",e+"_linear_gradient_2").attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%");i.append("stop").attr("offset","0%").attr("style","stop-color: #0084ff; stop-opacity: 1;"),i.append("stop").attr("offset","100%").attr("style","stop-color: #14467d; stop-opacity: 0.3;");var o=r.append("linearGradient").attr("id",e+"_linear_gradient_3").attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%");o.append("stop").attr("offset","0%").attr("style","stop-color: #6db8ff; stop-opacity: 0;"),o.append("stop").attr("offset","50%").attr("style","stop-color: #6db8ff; stop-opacity: 1.0;"),o.append("stop").attr("offset","100%").attr("style","stop-color: #6db8ff; stop-opacity: 0;");var l=r.append("linearGradient").attr("id",e+"_linear_gradient_4").attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%");l.append("stop").attr("offset","0%").attr("style","stop-color: #07239c; stop-opacity: 0.31;"),l.append("stop").attr("offset","100%").attr("style","stop-color: #073ba6; stop-opacity: 1;")}},{key:"_drawVertex",value:function(t,e){e=e||u.select('.vertex[data-id="'+t.data.id+'"]');var a=this,r=function(){a.fire({type:"itemClick",data:t.data})},n=function(){var e=a._d3SelectedItem;e&&(e._selected=!1,e._highlight=!1,e._updateSelectionState=!0,e._updateRelationState=!0,e.depth>1&&(e._blur=!0),a._updateVertexState(e),a._d3SelectedItem=null,e==t)||(a._d3SelectedItem=t,t._selected=!t._selected,t._highlight=!0,t._updateSelectionState=!0,t._updateRelationState=!0,a._updateVertexState(t,u.select(this)))},i=function(){t._highlight=!1,t._updateRelationState=!0,a._updateVertexState(t,u.select(this))},o=function(){t._highlight=!0,t._updateRelationState=!0,a._updateVertexState(t,u.select(this))};0==t.depth?(e.append("svg:image").attr("class","background").attr("x",-198.5).attr("y",-198.5).attr("width",397).attr("height",397).attr("xlink:href","./static/image/depth-0-vertex-normal-2.png"),e.append("text").attr("class","label").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size","16").attr("font-weight","bold").attr("fill","#b2e1ff").attr("y",55).text(function(t){return t.data.name}),e.append("circle").attr("class","button").attr("fill","#FFF").attr("opacity",0).attr("cx","0").attr("cy","0").attr("r","36").style("cursor","pointer").on("mouseout",function(){i.call(this.parentNode)}).on("mouseover",function(){o.call(this.parentNode)}).on("click",function(){r()})):(e.append("rect").attr("class","background").attr("width","100").attr("height","20").attr("rx","10").attr("ry","10").attr("y",-10).attr("fill",["url(#",a._id,"_linear_gradient_4)"].join("")).attr("stroke","#0064d5"),e.append("svg:image").attr("class","icon").attr("x",-10).attr("y",-10).attr("width",20).attr("height",20).attr("xlink:href","./static/image/depth-1-vertex-normal-type-"+t.data.type+".png"),e.append("text").attr("class","label").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size","12").attr("font-weight","bold").attr("fill","#b3bdd9").text(function(t){return t.data.name}),e.on("click",function(){n.call(this),r()}),e.style("cursor","pointer").on("mouseout",i).on("mouseover",o))}},{key:"_updateVertexState",value:function(t,e){e=e||u.select('.vertex[data-id="'+t.data.id+'"]');var a=this,r=t._highlight;if(t._selected&&(t._highlight=!0),e.attr("transform",function(t){var e=a._calculatePosition(t);return["translate(",e.x,",",e.y,")"].join("")}),0==t.depth)e.select(".background").attr("xlink:href","./static/image/depth-0-vertex-normal-2.png");else{var n=(t._angle+1.5707963267948966)%6.283185307179586<3.141592653589793,i=e.select(".label"),o=i.node().getBBox(),l=25+o.width+15;i.attr("x",(25+o.width/2)*(n?1:-1)+(n?-10:10)),e.select(".background").attr("width",l).attr("x",n?-10:10-l)}var s=t._updateSelectionState;t._updateSelectionState=!1;var d=t._updateRelationState;t._updateRelationState=!1,d&&(f(t,function(e,n){s&&(e._selected=t._selected),e._highlight=r,e._updateRelationState=!1,a._updateVertexState(e);var i=u.select(['.edge[data-source="',e.data.id,'"][data-target="',n.data.id,'"]'].join("")),o=i.datum();o._highlight=r,s&&(o._selected=t._selected),a._updateEdgeState(o,i)}),c(t,function(e,n){if(e!=t){s&&(e._selected=t._selected),e.depth>1&&(e._blur=!e._selected),e._highlight=r,e._updateRelationState=!1,a._updateVertexState(e);var i=u.select(['.edge[data-source="',n.data.id,'"][data-target="',e.data.id,'"]'].join("")),o=i.datum();o._highlight=r,s&&(o._selected=t._selected),a._updateEdgeState(o,i)}}))}}]),e}(d.default);e.default=p}])});